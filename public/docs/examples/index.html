<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Examples | Lightweight Search Engine</title><link rel=stylesheet href=/hugo-lightweight-search/css/main.min.73be4799b2091d293b47b52ca2642fe82aa2b1c9c050e8d1b389a80939a30dd4.css integrity="sha256-c75HmbIJHSk7R7UsomQv6CqiscnAUOjRs4moCTmjDdQ=" crossorigin=anonymous><script src=/hugo-lightweight-search/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js integrity="sha256-I80MfYNyY7nq65buLZzPopadqj+gD6HB/ocBqbhyUaE=" crossorigin=anonymous></script></head><body><header><h1>Lightweight Search Engine</h1><nav><ul><li><a href=/hugo-lightweight-search/>Home</a></li><li><a href=/hugo-lightweight-search/docs/>Documentation</a></li><li><a href=/hugo-lightweight-search/posts/>Blog</a></li><li><a href=/hugo-lightweight-search/pages/about/>About</a></li><li><a href=/hugo-lightweight-search/pages/search/>Search</a></li></ul></nav></header><main><h1>Examples</h1><time datetime=2025-10-06T00:00:00+00:00>October 6, 2025</time><h1 id=examples>Examples</h1><p>Real-world examples of implementing Hugo SQLite Search in various scenarios. All source code is available in the <a href=https://github.com/dlnorman/hugo-lightweight-search>GitHub repository</a>.</p><h2 id=hugo-integration-examples>Hugo Integration Examples</h2><h3 id=1-complete-working-search-page>1. Complete Working Search Page</h3><p>The repository includes a fully functional search page implementation:</p><ul><li><strong>Content file</strong>: <code>content/pages/search.md</code> defines the search page</li><li><strong>Template</strong>: <code>layouts/page/search.html</code> contains the complete search UI and JavaScript client</li><li><strong>Live demo</strong>: <a href=/search/>Try it here</a></li></ul><p>To use this in your site, simply copy these files from the repository to your Hugo site.</p><p>The search page includes:</p><ul><li>Search input with Enter key support</li><li>Section filtering dropdown (dynamically populated)</li><li>Sort options (relevance, date ascending/descending)</li><li>Result highlighting with <code>&lt;mark></code> tags</li><li>Pagination controls</li><li>URL parameter support (e.g., <code>/search/?q=hugo</code>)</li><li>Loading states and error handling</li></ul><p>View the complete implementation in <code>layouts/page/search.html</code> in the repository.</p><h3 id=2-adding-search-to-site-navigation>2. Adding Search to Site Navigation</h3><p>Update your Hugo config (<code>hugo.yaml</code>) to add search to the main menu:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>menu</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>main</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>identifier</span>: <span style=color:#ae81ff>search</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Search</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>/search/</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>50</span>
</span></span></code></pre></div><h3 id=3-customizing-the-search-ui>3. Customizing the Search UI</h3><p>The search page template (<code>layouts/page/search.html</code>) includes embedded CSS that you can customize. The default styles provide:</p><ul><li>Responsive layout with max-width container</li><li>Flexbox-based search form</li><li>Highlighted search terms with <code>&lt;mark></code> tags</li><li>Clean result cards with metadata</li></ul><p>To customize:</p><ol><li>Edit the <code>&lt;style></code> section in <code>layouts/page/search.html</code></li><li>Or extract the styles to your theme&rsquo;s CSS files</li><li>Match your site&rsquo;s existing design system</li></ol><p>View the default CSS in the repository&rsquo;s <code>layouts/page/search.html</code> file.</p><h3 id=4-excluding-specific-pages-from-search>4. Excluding Specific Pages from Search</h3><p>To exclude pages from the search index, add this to the page&rsquo;s front matter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Private Page&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>search</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>The default search data template (<code>layouts/_default/search-data.json</code> in the repository) already filters out:</p><ul><li>Pages with <code>search: false</code> in front matter</li><li>Draft pages</li><li>Pages with type &ldquo;page&rdquo;</li></ul><p>See the template in the repository for the complete filtering logic, which you can customize.</p><h2 id=javascript-client-examples>JavaScript Client Examples</h2><p>The repository includes a complete JavaScript implementation in <code>layouts/page/search.html</code>. Here are key patterns you can extract:</p><h3 id=1-basic-search-implementation>1. Basic Search Implementation</h3><p>The repository shows how to:</p><ul><li>Make API requests with fetch()</li><li>Handle query parameters with URLSearchParams</li><li>Process and display results</li><li>Handle errors gracefully</li></ul><p>See the <code>HugoSearch</code> class in <code>layouts/page/search.html</code> for the complete implementation.</p><h3 id=2-advanced-features>2. Advanced Features</h3><p>The reference implementation demonstrates:</p><p><strong>Section Filtering</strong>: The <code>loadSections()</code> method shows how to:</p><ul><li>Fetch available sections from the API</li><li>Dynamically populate filter dropdowns</li><li>Apply section filters to search queries</li></ul><p><strong>Sort Options</strong>: See how to implement multiple sort orders:</p><ul><li>Relevance (default BM25 ranking)</li><li>Date descending (newest first)</li><li>Date ascending (oldest first)</li></ul><p><strong>Pagination</strong>: The <code>renderPagination()</code> method demonstrates:</p><ul><li>Building page number controls</li><li>Handling page navigation</li><li>Showing result counts</li></ul><p>All of these are implemented in <code>layouts/page/search.html</code> in the repository.</p><h3 id=3-search-as-you-type>3. Search-as-You-Type</h3><p>To implement live search:</p><ul><li>Add input event listener with debouncing (300ms recommended)</li><li>Check minimum query length (2 characters)</li><li>Limit results (e.g., 5 for autocomplete)</li><li>Clear timeout on new input</li></ul><p>The repository&rsquo;s implementation uses a 300ms debounce to balance responsiveness with API load.</p><h3 id=4-result-highlighting>4. Result Highlighting</h3><p>The API automatically provides highlighted results in these fields:</p><ul><li><code>title_highlighted</code> - Title with <code>&lt;mark></code> tags around matches</li><li><code>summary_highlighted</code> - Summary with highlighted matches</li><li><code>content_snippet</code> - Content excerpt with highlights</li></ul><p>Simply use these fields in your HTML to display highlighted results. See <code>renderResult()</code> in the repository for an example.</p><h3 id=5-custom-implementations>5. Custom Implementations</h3><p>For custom search interfaces, refer to the repository&rsquo;s implementation as a starting point:</p><ul><li><strong>Modal/overlay search</strong>: Adapt the search form for modal dialogs</li><li><strong>Inline search</strong>: Embed search in page headers or sidebars</li><li><strong>Mobile-optimized</strong>: The default CSS is responsive, but you can customize further</li><li><strong>Keyboard navigation</strong>: Add arrow key support for results</li></ul><h2 id=api-usage-examples>API Usage Examples</h2><h3 id=1-testing-with-curl>1. Testing with curl</h3><p>Test the API from the command line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Basic search</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=hugo&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Search with filters</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=search&amp;section=docs&amp;sort=date_desc&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get available sections</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?action=sections&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Advanced query syntax</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=title:configuration+after:2024-01-01&#34;</span>
</span></span></code></pre></div><h3 id=2-javascript-integration>2. JavaScript Integration</h3><p>The repository demonstrates fetch API usage patterns. Key concepts:</p><ul><li>Build query strings with URLSearchParams</li><li>Handle async/await for cleaner code</li><li>Parse JSON responses</li><li>Handle errors with try/catch</li></ul><p>See the API Reference documentation for complete parameter details and response formats.</p><h3 id=3-advanced-query-syntax>3. Advanced Query Syntax</h3><p>The API supports sophisticated query syntax. Examples:</p><p><strong>Field-specific searches:</strong></p><ul><li><code>title:hugo</code> - Search in title only</li><li><code>tags:tutorial</code> - Search in tags</li><li><code>categories:development</code> - Search in categories</li></ul><p><strong>Date filters:</strong></p><ul><li><code>after:2024-01-01</code> - Posts after date</li><li><code>before:2024-12-31</code> - Posts before date</li><li><code>after:2024-01-01 before:2024-06-30</code> - Date range</li></ul><p><strong>Boolean operators:</strong></p><ul><li><code>hugo OR jekyll</code> - Either term</li><li><code>search engine</code> - Both terms (AND is default)</li></ul><p><strong>Phrase search:</strong></p><ul><li><code>"static site generator"</code> - Exact phrase</li></ul><p><strong>Complex queries:</strong></p><ul><li><code>title:configuration tags:hugo after:2024-01-01</code></li></ul><p>See the API Reference for complete query syntax documentation.</p><h2 id=advanced-use-cases>Advanced Use Cases</h2><h3 id=1-multi-language-search>1. Multi-language Search</h3><p>For multi-language Hugo sites:</p><ol><li>Filter pages by language in the search data template</li><li>Add a <code>language</code> field to the JSON output</li><li>Create separate search databases per language</li><li>Build each language&rsquo;s index: <code>php scripts/build-search-index.php public/en/search.db public/en/index.json</code></li></ol><p>See the Configuration documentation for template customization examples.</p><h3 id=2-section-specific-search-pages>2. Section-Specific Search Pages</h3><p>To create dedicated search pages for specific sections:</p><ol><li>Create a search page with front matter specifying the section</li><li>Modify the JavaScript to read the section from page metadata</li><li>Automatically filter searches to that section</li></ol><p>This is useful for documentation sites where you want separate search for docs vs. blog posts.</p><h3 id=3-search-analytics>3. Search Analytics</h3><p>Track search queries by:</p><ul><li><strong>Server-side</strong>: Add logging to <code>static/api/search.php</code> to write queries to a log file</li><li><strong>Client-side</strong>: Use Google Analytics events or custom analytics endpoints</li><li><strong>Data to track</strong>: Query terms, result counts, timestamps, user agents</li></ul><p>This helps identify popular topics and improve content.</p><h3 id=4-custom-ranking>4. Custom Ranking</h3><p>Customize relevance by modifying <code>static/api/search.php</code>:</p><ul><li>Boost exact title matches</li><li>Prioritize recent content</li><li>Favor specific sections or tags</li><li>Adjust BM25 weights</li></ul><p>The repository&rsquo;s PHP code includes SQL ORDER BY clauses you can customize.</p><h2 id=deployment-examples>Deployment Examples</h2><h3 id=1-github-actions-cicd>1. GitHub Actions CI/CD</h3><p>The repository can be deployed automatically with GitHub Actions:</p><p><strong>Key steps:</strong></p><ol><li>Setup Hugo and PHP with required extensions</li><li>Build Hugo site: <code>hugo --minify</code></li><li>Build search index: <code>php scripts/build-search-index.php public/search.db public/index.json</code></li><li>Deploy the <code>public/</code> directory to your hosting</li></ol><p>See the Getting Started guide for a complete GitHub Actions workflow example.</p><h3 id=2-traditional-php-hosting>2. Traditional PHP Hosting</h3><p>For shared hosting or VPS with PHP:</p><p><strong>Deployment process:</strong></p><ol><li>Build locally with <code>./build.sh</code></li><li>Upload <code>public/</code> directory via SFTP/FTP or rsync</li><li>Ensure proper permissions (644 for .db, 755 for .php files)</li><li>Verify PHP has SQLite3 extension enabled</li></ol><p>Most traditional hosts (cPanel, Plesk, etc.) support this out of the box.</p><h3 id=3-docker-deployment>3. Docker Deployment</h3><p>For containerized deployment:</p><p><strong>Requirements:</strong></p><ul><li>Base image: <code>php:8.1-apache</code> or <code>php:8.1-fpm</code></li><li>PHP extensions: <code>pdo</code>, <code>pdo_sqlite</code></li><li>Copy <code>public/</code> directory to web root</li><li>Set proper permissions</li></ul><p>The repository includes deployment script examples you can adapt.</p><h3 id=4-serverless-notes>4. Serverless Notes</h3><p><strong>Important:</strong> This solution uses PHP and SQLite, which work best with traditional or container hosting. For serverless platforms (Netlify, Vercel):</p><ul><li>You&rsquo;ll need to port the PHP code to serverless functions (Node.js/Python)</li><li>Or use an alternative JavaScript-based search solution</li><li>The SQLite database can work with serverless if using read-only mode</li></ul><h2 id=testing>Testing</h2><p>Test your search implementation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Basic search</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=hugo&#34;</span> | jq <span style=color:#e6db74>&#39;.total&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># With filters</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=search&amp;section=docs&#34;</span> | jq <span style=color:#e6db74>&#39;.results[] | .title&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Advanced queries</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=title:configuration&#34;</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?q=after:2024-01-01&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get sections</span>
</span></span><span style=display:flex><span>curl <span style=color:#e6db74>&#34;http://localhost/api/search.php?action=sections&#34;</span> | jq <span style=color:#e6db74>&#39;.sections&#39;</span>
</span></span></code></pre></div><h2 id=performance-optimization>Performance Optimization</h2><p><strong>Caching strategies:</strong></p><ul><li>Add HTTP cache headers to the PHP API (5-10 minute cache)</li><li>Implement file-based result caching for common queries</li><li>Use CDN for the search page assets</li><li>Enable PHP opcache on your server</li></ul><p><strong>Database optimization:</strong></p><ul><li>Run <code>VACUUM</code> and <code>ANALYZE</code> after building the index</li><li>Keep content truncated to reasonable lengths</li><li>Index only necessary fields</li></ul><p><strong>Client-side:</strong></p><ul><li>Debounce search-as-you-type (300ms+)</li><li>Limit initial result counts</li><li>Implement virtual scrolling for many results</li></ul><p>See the Configuration documentation for specific optimization settings.</p><h2 id=more-resources>More Resources</h2><ul><li><strong><a href=/docs/api-reference/>API Reference</a></strong> - Complete API documentation with all parameters and response formats</li><li><strong><a href=/docs/configuration/>Configuration</a></strong> - Customization options for templates, tokenizers, and behavior</li><li><strong><a href=/docs/getting-started/>Getting Started</a></strong> - Step-by-step installation guide</li><li><strong><a href=https://github.com/dlnorman/hugo-lightweight-search>GitHub Repository</a></strong> - View all source code and contribute</li></ul></main><footer><p>Copyright 2025. All rights reserved.</p></footer></body></html>